# 常见问题

> 此处整理问题，汇总更新，如有问题，请加微信：Kungfuas

1. 什么是数字激光雷达，MBF与传统方案的区别是？

   传统方案，每个发射端包括对应线数的多颗EELD，每个LD后面带有PCB处理光源的驱动与调制；每个接收端包括对应线数的多颗APD，每个APD后面带有自己的PCBA处理强度采集、AD转换、阈值比较、信噪滤波与计算处理单元，所以随着线数增加，成本、结构、体积与器件复杂度严重增加，可靠性性指数降低，且每一路信号都需要单独校准标定，批次间一致性差，批次内甚至每个雷达内的像素关系随着时间都发生变化，比如平均上大多需要至多2000hr就要重新做一次标定。

   OS方案，MBF充分发挥了垂直腔面发射激光器（Vertical Cavity Surface Emitting Laser, VCSEL）和单光子雪崩二极管（Single Photon Avalanche Diode, SPAD）的优势，“闪光”指全像素并发发射与并发接收，“多光束”指用精确的光束而非大量泛光来照明整个场景。在可靠性、耐用性、低噪音、高温运行、电气效率、紧凑性、成本、与外围组件的直接集成、由消费电子产业推动的大规模外围研发，以及基本性能方面的巨大改进空间。

   基于此，无论多少线，OS雷达内永远只有收发合计2枚芯片，发射端用VCSEL将多颗发射单元及后端处理线路放在一颗SOC上，接收端自研Spads ASIC将全部像素及后端处理电路全部聚集在一颗芯片上，随着线数增加，成本、结构、体积、器件复杂度、设备可靠性没有很大变化，一路标定全部标定，一次标定终生标定，像素元芯片内固化锁定，代表着更高的集成度与可靠性。

2. VSCEL 有什么优势，OS为何选用VSCEL？

   Ouster采用VCSEL，因为它们比其它激光器技术更小、更轻、更耐用、更快、更易于制造，并且功率效率更高。目前激光雷达系统中使用的某些类型的脉冲激光器（例如，1550 nm光纤激光器），可能需要花费数千美元并且功耗达到数十或数百瓦，而Ouster的VCSEL成本要低几个数量级，功耗仅为数瓦，且尺寸更小巧。此外，随着全球上千亿颗VCSEL出货，Ouster还在性能、批量和成本方面遵循摩尔定律改进曲线。

   同时，Ouster的VCSEL与光学鼠标或智能手机中使用的器件不同。Ouster开发了定制化的VCSEL模块，将所有激光器整合在一颗半导体芯片上。此外，Ouster在VCSEL设计的每个层面都取得了突破，将VCSEL有效亮度提高了几个数量级，同时还将光脉冲缩短至几个纳秒。

   Ouster的单芯片VCSEL具有大幅降低系统复杂性和成本的附加优势。其它激光雷达需要在电路板上精密排布数十甚至数百个昂贵的激光器芯片和激光驱动电路，Ouster的激光雷达仅需要使用单颗激光驱动器和激光器芯片。因此，OS-1-64在每个方向上实现140米的探测距离，仅需要一块不超过一粒米大小的玻璃片。

3. SPads有什么优势，OS为何选用spads？

   SPAD检测到光子时会产生一个二进制脉冲，具有单光子灵敏度、低噪声和极佳的时间分辨率（典型的抖动在10 ps和100 ps之间），以直接集成在CMOS晶圆中，从而在探测器旁边的硅基芯片上整合大量的信号处理，使它们成为Ouster激光雷达探测和超短激光脉冲的理想选择。

   随着激光雷达分辨率和数据速率的不断提高，片上信号处理至关重要。目前的OS-1-64探测器能够每秒计数并存储超过一万亿个光子到片上存储器中。这是一个庞大的数据量，Ouster已经在超过1000万个晶体管中实现100 GMAC/s（1 GMAC = 10亿乘法累加运算）的信号处理逻辑，最终能够每秒产生数百万个3D点，其客户可用于自动驾驶、环境测绘以及识别障碍物。

   SPAD也沿着摩尔定律的性能曲线前进。虽然今天的SPAD可能仅有2-5%的效率，新的SPAD效率为20~30%（在850nm波长），随着技术的成熟，效率可提高至80%。SPAD探测器效率的提高，可以直接增加激光雷达的探测范围和分辨率，SPAD探测器10倍的效率提升，极有可能使OS-1实现640线的分辨率。与激光雷达中使用的传统探测器技术不同，Ouster的SPAD技术已经实现了市场领先的性能，但仍然具有一个数量级的改进空间。

4. OS雷达是固态雷达还是机械雷达，还是混合固态雷达？

   机械雷达通常指全部旋转与飞镜摆镜旋转，纯固态雷达一般指OPA光相控阵电磁扫描，或者泛光flash非扫描；混合固态看如何定义，通常是指的MEMS微振镜路线，宏观上没有旋转元器件，微观上通过压电/热电/磁致伸缩材料做微振镜进行惯性扫描，优点是比目前所有固态雷达产业链成熟（一维与二维振镜，相对于OPA光相控阵没见过活的）及量程中等偏上（相对于传统泛光flash能效低一般30m以内），缺点是，视场角小，抗振差，惯性扫描有加减速平台，光圈小，无法做成环视等。

   OS的架构特点：所有的收发，无论多少线，统一放在1颗ASIC里，发射端VSCEL（把EELD及光源驱动PCB外设都固态化了），接收端SPADS阵列（把APD及外置放大比较数模转化强度采集信噪处理计算给固态化了），后者相当于传统的泛光flash的接收端，但是为了在保留泛光flash的高可靠性的同时避免后者的能效不高的不足，我们将泛光照明改为多光束同轴旋转扫描。

5. Livox 是固态或混合固态雷达么？

   不是，是机械扫描当中的双飞镜扫描，而且是一种非均布的渐进收敛扫描，具备2个扫描分量，等价帧率与点云时间密度偏低，后续算法需要重建，无法复用VLP多年累积的长期训练数据，由于是机械双飞镜，对振动环境下的可靠性与寿命有影响，同时由于FOV偏小，需要多颗拼接才能形成完整视野，但由于单位时间内工作像素少，所以class1等级下容许更高的发射功率，故而量程不错，是一款比较特别的双飞镜方案。

6. 业界同样或接近规格雷达多用903nm或905nm，甚至是1000nm以上波长，为何OS选择850nm或865nm？

   1000nm以上波长多用光纤激光器，成本较高，体积较大，而且由于瑞利判据(Rayleigh Criterion)，波长越长其实极限分辨率越低，但因为单光子能量低，所以class1容许发射功率越高，进而测程较长；

   850/865/903/905nm都属于近红外波段，都可以使用成本较低的半导体激光器，选择903/905nm可以避开太阳光当中较强的近红外波段，在对应滤波片的配合下可以实现同等情况下较高的信噪比，这是为何多数选择该波段；

   OS雷达选择850/865nm作为工作波段，原因大致有4：

   - 更低的水汽吸收性：高层大气中的水蒸气吸收导致太阳光谱在905 nm、940 nm和1550 nm处有显著下降，但是激光脉冲在地表传输时，地面的雾等湿度条件也会产生同样的效应，吸收宝贵的激光能量，导致激光雷达接收器捕获的激光减少。相比之下，850 nm光谱在所有条件下都具有更低的大气水汽吸收，比其它流行的激光雷达工作波长（如1550 nm）要低几个数量级。这意味着Ouster激光不会在潮湿环境中被吸收，可以实现一致性更高的运行。当然，光谱的水蒸汽吸收问题不应与大气中的液态水（如雨水或浓雾）相混淆，这对所有激光雷达传感器来说都是挑战。
   - 更高的CMOS探测器灵敏度：硅基CMOS探测器在850 nm处比在较长波长处灵敏度高得多，例如，从850nm波长到905 nm波长灵敏度大约降低了2倍。在850 nm处设计Ouster激光雷达系统使其能够检测到更多反射回传感器的激光，这相当于获得了更长的探测距离和更高的分辨率。
   - 更高的环境图像质量：Ouster最近发布的固件使OS-1能够收集激光雷达成像以外的环境图像，850 nm工作波长便与此有很大关系。利用更多来自太阳的850 nm光子，环境图像具有更高的信噪比，这在黎明、黄昏或阴天时更加有用。
   - 采用更低功耗、更高效率的技术：Ouster专利技术使其能够相比竞争对手，将任何工作波长下的环境“本底噪声”降低一个数量级以上。这使Ouster激光器和接收器能够使用各种低功耗、高效率的技术，而这些技术通常被认为不可能在传统高性能激光雷达中应用。Ouster的技术专注于以更低的成本、更低的功耗、更小的尺寸和更少的组件来实现更好的性能。

   7. 标准交期是多久？

      ASIC2019在封城疫情期间仍然维持2周，ASIC2020 封城一清期间暂定6-8周。

   9. windows下默认被识别为IPV6如何操作？

      参考：[OusterStudio @windows]()

   10. 断网关防火墙之后，仍然无效是因为如何？

       重启一下，有部分windows重启后防火墙才真正设置生效

   11. 在XXm处多大物体切割多少个点正常么？

       这是一个基于安装位置，安装角度，距离，待测物体的投影面积（高度决定线数，宽度决定点数），发射模式与帧率共同决定的，是一个三角函数问题（看下多少提前上天锄地），以及记得看下默认发射方式是1024x10，而不是2048x10，如果你用的默认发射方式的话。

   12. OS的雷达，pixel distance也会随着时间或振动发生变动么，也需要不超过2000hr必须重新校准么？

       不需要，像素元芯片内空间锁定固化，设计寿命内不发生变动

   12. OS面阵如何解决串扰？

       - 芯片内阻隔层
       - 像素间亚像素intrinsic offset
       - 多层优化（光圈与镜头）的高准直专利光路
       - Time correlated single photon counting (TCSPC) 时间相关单光子计数及阈值比较器

   13. 对于尘霾矿场的情况呢？

       灰尘其实一种是在空中潜伏的，一种是落在雷达表面的，所以对灰尘的处理上，首先是不能让灰尘进入雷达造成设备损坏，我们这点上是ip69k。其次，是落在镜头处的灰尘不能影响感知，我们的解决方案是超大光圈，大概是别人的5-10倍。最后是高速漂浮的灰尘不要形成鬼点或者拖曳痕，我们的解决方案是采用了百万分之一秒的超高速快门解决动态糊化，然后采用了最强回波把来自灰尘的弱遮挡信息滤除，只认可灰尘后更强实体的回波。

   14. Ubuntu下寻找全部雷达IP的命令是？

       ```sh
       avahi-browse -lr _roger._tcp
       ```

   15. 客户可以自行及动态更改VFOV么？

       目前并未下发授权Key

   16. 请问如何理解极坐标到笛卡尔坐标转换过程中，azimuth角度当中有2个构成分量？

       其中左侧encodeID是一套从0-90111的编码（1024 x88，2048 x44），对应着相位角度，encodeID x2π/90112就能得到此刻的偏转相位弧度，另外一个分量来自`get_beam_intrinsics  intrinsic` 或者 ` lidar_origin_to_beam_origin_mm`对每个beam的初始角度的query，可以认为是一个初始offset，*2π/360是为了同样变成弧度，加和就得到了全部真实的相位（初始+偏置）。

   17. IMU是硬连接还是软连接，输出原始观测量还是解算值，fps是否可调？
       - IMU与PCB之间是硬连接，没有做抗震设计，主要是为了充分反映雷达自身的振动情况
       - 帧率是100HZ固定帧率不可改暂时
       - 原始观测量，没有解算

   18. 标准线缆多长？最长可多长？

       5m，目前直到10m有库存，更长可达100m，但需要定制

   19. 工作温度指的是环境温度，还是雷达自身温度？有无进一步拓宽温度区间的计划？

       指的是环境温度，特别是相对靠近雷达工作空间的环境温度；

       我们在Q2可以实现低温区在-40℃冷启（fw 1.14 b10），在O4会实现55℃高温区，预计在2021年Q2实现85℃；

       在当前情况下，如果是低温启动，建议先在稍微温暖地方发动后再移动到较冷环境，或者安装加热电阻用来启动前预热；如果是高温工作，可以考虑增加遮阳板，通风空间并尽量保持导热良好的金属与上下接触，除非大家有良好的散热设计，否则不建议移除我们底座与顶部散热片。

   20. 如果移除底板与顶部散热片，在密闭室内过热，会导致雷达烧坏么？发现OS雷达长期工作会有些烫手，这正常么？

       - 通常不会，我们雷达具备自保护机制，一旦过热会尝试降低发射率与帧率，如果严重过热，会断电自保护，雷达本身不会损坏，我们也提供了一个TCP命令来查询目前温度状态。
       - 我们本身的热鳍结构，是一个高能效热泵，可以将大量热高效传导到表面，所以感觉有时连续工作可能发烫，但多数时候这个并不影响正常工作，哪怕是最差情况下环境温度过高，我们内部有上述自动热保护机制。
       - 相对发热底层原因其实是因为我们内部芯片化集成度更高的高配像素密度，而且由于是全像素并发（同时发同时收而不是挨个串发)，所以我们的发热会相对高一些；但说实话，环境温度达到60℃以上的环境应该不多，这种天气没人敢出来，香港近十年最高气温40度，亚热带气候下已经不鼓励出门，有中暑死亡案例。
       - 如果真的类似工作环境，且不可规避，短期建议遮阳避免直晒，以及建议增加主动通风或降温，有条件的话，用半导体制冷（温差生电压，电压生温差)，同时马上低温区会在q2实现-40度，顺利的话，今年高温区实现60℃以上，目标实现车规85℃以上（待定，因为仍然在封城。。）

   21. 什么叫时空锁定机制，有什么价值？

       空间锁定：所有像素关系终生固化为芯片内部，不像其他方案：手动挨个装一堆，然后同一部设备不超过2000hr就需要重新标定一次，如果环境恶劣可能是几百小时就得重新标定，更不提批次间不一致; 

       时间锁定：并发，而非串发，所以所有线数收发共享时域。 假设128线，有128ms 发射时间，意味着每条线都有128ms，而不是串发128/128=1ms，所有可以对单一方向进行更多次测量滤波优化。

   22. 基于Velodyne的旋转机械雷达，转一圈实际上点云的时间戳是周期性的变换，这样当车在运动的过程中，扫到的一面墙很可能就不是平的了，需要结合车的运动信息进行补偿，才能得到真实的点云，OS雷达也是这样么？OS雷达当中的时间戳是发射时间戳，还是接收时间戳？

       - 位置数据当中的时间戳是发射时间戳；
       - VLP同一方位角不同beam之间，因为是串发轮询，也就是第一个线路发射出去之后，才是第二线发射，在这个时间内，车向前走了一段路，以此类推，比如第128线，他们就有127x deltaT的延时，车就向前走了127x deltaT*V的路，所以他们每个beam都有不同的时间戳需要修正，而OS因为是并发所有任意方位角是同步发射，所以无需修正；
       - 但是水平方位角上，由于会有1024或2048次发射，之间有N-1个offset，因水平发射是周期串行发射，所以仍然要计入相关车体运行的修正，对这360°上不同发射延迟的修正。

   23. 什么是并联冗余接收，有什么价值？

       我们每个像素下面其实并联了好多个亚像素，所以即使恶劣环境下，由于种种不可抗力部分或n-1像素瞎了，仍然维持工作，不像其他方案瞎了就是瞎了；这个还可以用于一些更复杂的比如后期pixel-specific filter-powered RGB-ID等场景，同时在不影响信噪比的情况下避免过曝风险

   24. 什么是子光束指向及密度分布，有什么价值？

       纵向FOV 可以变化，可以比如降低到50% 而维持线数不变，可以中间密两边疏，可以只水平向下，如果特别大的用户，我们还可以给他定制，参照此处：https://drive.weixin.qq.com/s?k=AEYARQeBAAYoGIegvHAE4AvQanABU

   25. OS的PPS对齐是绝对相位对齐，还是相对的频率对齐？

       PPS对齐有相位对齐与频率对齐两种，前者是绝对对齐，以上升沿为标记，后者不要求频率或相位都一致，只需要其保持固定的或成比例的差别。对OS而言，是PPS上升沿对齐，绝对相位对齐。

   26. 雷达回波强度与雷达反射率数据的取值范围是多少？

       二者的赋值空间都是unsigned int16，最大赋值空间是0-2^16-1, 但目前实际使用的是13位。

   27. 何为盲区检测？

       在最小检测距离（盲区）内，比如<25cm，告知0/1代表障碍物的有无，可作极限区域避障，或者污渍覆盖物的检测。

       ![img](faq.assets/Q0Yh1u-tsjUUwkCx520eM5NeVz0IhLDpU0qwZzP21SgaOaTXohmEnJj1kM14c1xF6j1AMLr1oIMZ7BBP5LdG13sAz116B5phq7MzoG9VcoD1OafbPy8xiRcXYViMzDR-5eGkARXnvMc.png)

   28. 何为锁相？

       ![img](faq.assets/FHjrzP5mis-_1F7_17i0ynjnQWyrmp24heog_UB9iEBpAZ5QGqkepZZPRSObZpO165lh5TevxR90X80lyjxdxVwKJR-HzScmbFYTkyJlj7C4A4-6OrmhVq7v2SALD_ztyEQlK8KW08A.png)

   29. 什么是无线供电与POE+供电？

       无线供电指的是相对于某些友商采用的滑环接触供电的使用寿命而言，我们是无接触供电，POE+指的是我们与google共享的一个专利设计ibox，可以直接网线同时作为数据传输与供电。

   30. 黑匣子有什么用？

       记录从出厂以来的全部操作，用于：

       - 保修期追溯
       - 最近一次的信息采用json明文记录，历史信息bin文件加密，如果遇到问题可以第一时间回传，远程实时判定问题并提供意见
       - 如果确认责任归属于OS，则OS可以提前安排返修或退换，无需等待太长周期
    - 浏览器访问http://OS(1)-SN.local或IP，可以下载到对应的日志文件，也可以用如下命令：
         - Curl command for MetricsDb: `curl <sensor_ip>/api/v1/system/metricsdb/dump > dump`
      - Curl command for Journal: `curl <sensor_ip>/api/v1/system/journal/dump > journal.bin`

29. 目前相机是额外一套cmos相机么，最高像素是多少，是彩色相机么？
   
    并非额外外设，是spads复用，自身不发射，全部来自环境光的灰度信息，最高像素2048*N，N为线数，是灰度相机，但是3帧相机数据是原生时空对齐的。
   
30. 目前是多次回波方案么？
   
    目前选择的是最强回波方案，我们计划在Q4加入多次回波
   
31. 目前128线 2048*10hz为例，每秒钟的总点云数目是多少，计入IMU数据后，数据量是多少，用bag或pcap格式？
   
    - IMU @100HZ数据占比非常低，约0.2%，设置`udp_port_imu` to `"”` 就可关闭该输出；
    
       - 不同线数的激光雷达的单UDP包大小为：
        
         - 各系列16线激光雷达每个UDP包大小为3392bytes
      - 各系列32线激光雷达每个UDP包大小为6464bytes
         - 各系列64线激光雷达每个UDP包大小为12608bytes
      - 各系列128线激光雷达每个UDP包大小为24896bytes
    
      每16个方位角的数据组成一个UDP包发送出去，如果以2048x10的发射率，意味着每秒发射10fps*2048/16=1280个UDP包，以此换算。
    
      ![image-20200519092101686](faq.assets/image-20200519092101686.png)
   
32. 有没有方法在不断电的情况下，使雷达处于省电待机状态？
   
    目前没有类似standby指令，除非初始化状态下可以发一个TCP让暂不击发，但是一旦击发后除非断电无法进入热待机，只能通过降低帧率与增加定时//定角发射间隔实现。
   
33. 默认线材是多长的？
   
    默认配5m ibox straight light cable，需要特别长度，不同角度connector，以及pigtail需要特别提出。
   
34. 脉冲dtof，脉冲itof的区别是什么？
   
    - itof本质上是测相移：
    
    

   ![image-20200526123527033](faq.assets/image-20200526123527033.png)
    
   ![image-20200526123611446](faq.assets/image-20200526123611446.png)
    
   ![image-20200526123646512](faq.assets/image-20200526123646512.png)
    
   ![image-20200526123702816](faq.assets/image-20200526123702816.png)
    
   - dtof 本质是直接TDC计算时间

35. 三帧相机的效果是？
   
    ![1c2dbd4c-3fc7-42e5-96fa-f3c6b50825c9](faq.assets/1c2dbd4c-3fc7-42e5-96fa-f3c6b50825c9-9439917.png)
   
    ![c6bacfc1-a4af-4673-9d7a-897755ebbe88](faq.assets/c6bacfc1-a4af-4673-9d7a-897755ebbe88-9439917.png)
   
    
   
    ![89264681-a628-4e20-b2bf-ed2fa8837165](faq.assets/89264681-a628-4e20-b2bf-ed2fa8837165-9439917.gif)
   
    ![0bd69b23-82e5-46e3-8d63-e44c74eaab79](faq.assets/0bd69b23-82e5-46e3-8d63-e44c74eaab79-9439917.gif)
   
36. 屏幕点云闪烁是什么原因？

<video src="file:///Users/jacky.xu/Ouster-Docs-CN/docs/videos/1589272302572522.mp4" data-src="videos/1589272302572522.mp4" controlslist="nodownload" controls="controls" style="-webkit-user-select: none !important; box-sizing: border-box; max-width: 100%; display: block; margin: 0px auto; transform: translateZ(0px);"></video>

​	这是典型的udp package loss 丢包，请检查 Cable/Hub以及网卡是否是 **真千兆** ，一般更换之后就会消除

36. 雷达的false negative抑制情况如何？
   
    ![ANTIGLARE](faq.assets/ANTIGLARE.gif)
   
32. OS雷达的可靠性如何？

   ![7761c0b5-c6bf-49c0-9a53-a3dd576c4d9c](faq.assets/7761c0b5-c6bf-49c0-9a53-a3dd576c4d9c-9439917.gif)![06a0f4b1-3f1e-4892-a406-30b8dfa57da0](faq.assets/06a0f4b1-3f1e-4892-a406-30b8dfa57da0-9439917.gif)

   ![27a67ef2-516a-41c2-83d6-9c23721c3420](faq.assets/27a67ef2-516a-41c2-83d6-9c23721c3420-9439917.gif)![a8c6a9ca-fbc9-4871-a185-0c8cc3ea88c2](faq.assets/a8c6a9ca-fbc9-4871-a185-0c8cc3ea88c2-9439917.gif)