# 常见问题

> 此处整理问题，汇总更新，如有问题，请加微信：Kungfuas

1. 什么是数字激光雷达，MBF与传统方案的区别是？

   传统方案，每个发射端包括对应线数的多颗EELD，每个LD后面带有PCB处理光源的驱动与调制；每个接收端包括对应线数的多颗APD，每个APD后面带有自己的PCBA处理强度采集、AD转换、阈值比较、信噪滤波与计算处理单元，所以随着线数增加，成本、结构、体积与器件复杂度严重增加，可靠性性指数降低，且每一路信号都需要单独校准标定，批次间一致性差，批次内甚至每个雷达内的像素关系随着时间都发生变化，比如平均上大多需要至多2000hr就要重新做一次标定。

   OS方案，MBF充分发挥了垂直腔面发射激光器（Vertical Cavity Surface Emitting Laser, VCSEL）和单光子雪崩二极管（Single Photon Avalanche Diode, SPAD）的优势，“闪光”指全像素并发发射与并发接收，“多光束”指用精确的光束而非大量泛光来照明整个场景。在可靠性、耐用性、低噪音、高温运行、电气效率、紧凑性、成本、与外围组件的直接集成、由消费电子产业推动的大规模外围研发，以及基本性能方面存在巨大改进空间。

   基于此，无论多少线，OS雷达内永远只有收发合计2枚芯片，发射端用VCSEL将多颗发射单元及后端处理线路放在一颗SOC上，接收端自研Spads ASIC将全部像素及后端处理电路全部聚集在一颗芯片上，随着线数增加，成本、结构、体积、器件复杂度、设备可靠性没有很大变化，一路标定全部标定，一次标定终生标定，像素元芯片内固化锁定，代表着更高的集成度与可靠性。

2. VSCEL 有什么优势，OS为何选用VSCEL？

   Ouster采用VCSEL，因为它们比其它激光器技术更小、更轻、更耐用、更快、更易于制造，并且功率效率更高。目前激光雷达系统中使用的某些类型的脉冲激光器（例如，1550 nm光纤激光器），可能需要花费数千美元并且功耗达到数十或数百瓦，而Ouster的VCSEL成本要低几个数量级，功耗仅为数瓦，且尺寸更小巧。此外，随着全球上千亿颗VCSEL出货，Ouster还在性能、批量和成本方面遵循摩尔定律改进曲线。

   同时，Ouster的VCSEL与光学鼠标或智能手机中使用的器件不同。Ouster开发了定制化的VCSEL模块，将所有激光器整合在一颗半导体芯片上。此外，Ouster在VCSEL设计的每个层面都取得了突破，将VCSEL有效亮度提高了几个数量级，同时还将光脉冲缩短至几个纳秒。

   Ouster的单芯片VCSEL具有大幅降低系统复杂性和成本的附加优势。其它激光雷达需要在电路板上精密排布数十甚至数百个昂贵的激光器芯片和激光驱动电路，Ouster的激光雷达仅需要使用单颗激光驱动器和激光器芯片。因此，OS-1-64在每个方向上实现140米的探测距离，仅需要一块不超过一粒米大小的玻璃片。

3. SPads有什么优势，OS为何选用spads？

   SPAD检测到光子时会产生一个二进制脉冲，具有单光子灵敏度、低噪声和极佳的时间分辨率（典型的抖动在10 ps和100 ps之间），以直接集成在CMOS晶圆中，从而在探测器旁边的硅基芯片上整合大量的信号处理，使它们成为Ouster激光雷达探测和超短激光脉冲的理想选择。

   随着激光雷达分辨率和数据速率的不断提高，片上信号处理至关重要。目前的OS-1-64探测器能够每秒计数并存储超过一万亿个光子到片上存储器中。这是一个庞大的数据量，Ouster已经在超过1000万个晶体管中实现100 GMAC/s（1 GMAC = 10亿乘法累加运算）的信号处理逻辑，最终能够每秒产生数百万个3D点，其客户可用于自动驾驶、环境测绘以及识别障碍物。

   SPAD也沿着摩尔定律的性能曲线前进。虽然今天的SPAD可能仅有2-5%的效率，新的SPAD效率为20~30%（在850nm波长），随着技术的成熟，效率可提高至80%。SPAD探测器效率的提高，可以直接增加激光雷达的探测范围和分辨率，SPAD探测器10倍的效率提升，极有可能使OS-1实现640线的分辨率。与激光雷达中使用的传统探测器技术不同，Ouster的SPAD技术已经实现了市场领先的性能，但仍然具有一个数量级的改进空间。

4. OS雷达是固态雷达还是机械雷达，还是混合固态雷达？

   机械雷达通常指全部旋转与飞镜摆镜旋转，纯固态雷达一般指OPA光相控阵电磁扫描，或者泛光flash非扫描；混合固态看如何定义，通常是指的MEMS微振镜路线，宏观上没有旋转元器件，微观上通过压电/热电/磁致伸缩材料做微振镜进行惯性扫描，优点是比目前所有固态雷达产业链成熟（一维与二维振镜，相对于OPA光相控阵没见过活的）及量程中等偏上（相对于传统泛光flash能效低一般30m以内），缺点是，视场角小，抗振差，惯性扫描有加减速平台，光圈小，无法做成环视等。

   OS的架构特点：所有的收发，无论多少线，统一放在1颗ASIC里，发射端VSCEL（把EELD及光源驱动PCB外设都固态化了），接收端SPADS阵列（把APD及外置放大比较数模转化强度采集信噪处理计算给固态化了），后者相当于传统的泛光flash的接收端，但是为了在保留泛光flash的高可靠性的同时避免后者的能效不高的不足，我们将泛光照明改为多光束同轴旋转扫描。

5. Livox 是固态或混合固态雷达么？

   - 不是，是宏观机械扫描当中的双飞镜惯性扫描，而且是一种非均布的渐进收敛与多帧积分扫描，2枚机械飞镜具备2个正交扫描分量（分别高频加减速振动）。
   - 本身等价帧率（约1hz）与点云时间密度(约24万点每秒)相对偏低，后续算法需要重建，无法复用VLP多年累积的长期训练数据，包括历史积累的数据集及训练模型，都无法平滑迁移。
   - 由于是机械双飞镜，又为了提帧而提速，所以其使用寿命受到影响，因不像泛光flash不扫描，也不是MEMS微振镜微观机械扫描，也不是OPA非惯性电磁扫描，甚至不是机械圆周运动匀速没有加减速，而是<u>2块宏观机械飞镜在不断高频加减速振动</u>，对振动环境下的可靠性与寿命影响尤大。
   - 由于实际上其实属于单像素（或《4像素）时间轮询串发，所以任何方位角上（我们只算纵向就好）都是不同的时间戳，都需要做各速度分量的位移时间补偿；且测绘类应用与航向非正交部分是扫描分量无意义，进一步削弱等价帧率与有效点云密度。
   - 同时由于FOV偏小（比如tele15仅15°），需要多颗拼接（如24部，即使不overlap）才能形成完整视野，总重量（1.2kg*24=》20kg），总成本（9kx24=>220K）等也有一定局限性。
   - 无法内置环境光相机，多数型号无内置IMU。
   - 但由于单位时间内工作像素少，所以class1等级下容许更高的发射功率，且瞬发fov极小，故而量程不错，是一款非常出色的高性价比双飞镜方案。

6. 业界同样或接近规格雷达多用903nm或905nm，甚至是1000nm以上波长，为何OS选择850nm或865nm？

   1000nm以上波长多用光纤激光器，成本较高，体积较大，而且由于瑞利判据(Rayleigh Criterion)，波长越长其实极限分辨率越低，但因为单光子能量低，所以class1容许发射功率越高，进而测程较长；

   850/865/903/905nm都属于近红外波段，都可以使用成本较低的半导体激光器，选择903/905nm可以避开太阳光当中较强的近红外波段，在对应滤波片的配合下可以实现同等情况下较高的信噪比，这是为何多数选择该波段；

   OS雷达选择850/865nm作为工作波段，原因大致有4：

   - 更低的水汽吸收性：高层大气中的水蒸气吸收导致太阳光谱在905 nm、940 nm和1550 nm处有显著下降，但是激光脉冲在地表传输时，地面的雾等湿度条件也会产生同样的效应，吸收宝贵的激光能量，导致激光雷达接收器捕获的激光减少。相比之下，850 nm光谱在所有条件下都具有更低的大气水汽吸收，比其它流行的激光雷达工作波长（如1550 nm）要低几个数量级。这意味着Ouster激光不会在潮湿环境中被吸收，可以实现一致性更高的运行。当然，光谱的水蒸汽吸收问题不应与大气中的液态水（如雨水或浓雾）相混淆，这对所有激光雷达传感器来说都是挑战。
   - 更高的CMOS探测器灵敏度：硅基CMOS探测器在850 nm处比在较长波长处灵敏度高得多，例如，从850nm波长到905 nm波长灵敏度大约降低了2倍。在850 nm处设计Ouster激光雷达系统使其能够检测到更多反射回传感器的激光，这相当于获得了更长的探测距离和更高的分辨率。
   - 更高的环境图像质量：Ouster最近发布的固件使OS-1能够收集激光雷达成像以外的环境图像，850 nm工作波长便与此有很大关系。利用更多来自太阳的850 nm光子，环境图像具有更高的信噪比，这在黎明、黄昏或阴天时更加有用。
   - 采用更低功耗、更高效率的技术：Ouster专利技术使其能够相比竞争对手，将任何工作波长下的环境“本底噪声”降低一个数量级以上。这使Ouster激光器和接收器能够使用各种低功耗、高效率的技术，而这些技术通常被认为不可能在传统高性能激光雷达中应用。Ouster的技术专注于以更低的成本、更低的功耗、更小的尺寸和更少的组件来实现更好的性能。

11. OS的雷达，pixel distance也会随着时间或振动发生变动么，也需要不超过2000hr必须重新校准么？

    不需要，像素元芯片内空间锁定固化，设计寿命内不发生变动

12. OS面阵如何解决串扰？

    - 芯片内阻隔层
    - 像素间亚像素intrinsic offset
    - 多层优化（光圈与镜头）的高准直专利光路
    - Time correlated single photon counting (TCSPC) 时间相关单光子计数及阈值比较器

13. 对于尘霾矿场的情况呢？

    灰尘其实一种是在空中潜伏的，一种是落在雷达表面的，所以对灰尘的处理上，首先是不能让灰尘进入雷达造成设备损坏，我们这点上是ip69k。其次，是落在镜头处的灰尘不能影响感知，我们的解决方案是超大光圈，大概是别人的5-10倍。最后是高速漂浮的灰尘不要形成鬼点或者拖曳痕，我们的解决方案是采用了百万分之一秒的超高速快门解决动态糊化，然后采用了最强回波把来自灰尘的弱遮挡信息滤除，只认可灰尘后更强实体的回波。

16. 客户可以自行及动态更改VFOV么？

    目前并未下发授权Key

19. 标准线缆多长？最长可多长？

    5m，目前直到10m有库存，更长可达100m，但需要定制

22. 什么叫时空锁定机制，有什么价值？

    空间锁定：所有像素关系终生固化为芯片内部，不像其他方案：手动挨个装一堆，然后同一部设备不超过2000hr就需要重新标定一次，如果环境恶劣可能是几百小时就得重新标定，更不提批次间不一致; 

    时间锁定：并发，而非串发，所以所有线数收发共享时域。 假设128线，有128ms 发射时间，意味着每条线都有128ms，而不是串发128/128=1ms，所有可以对单一方向进行更多次测量滤波优化。

    并发示意图：![image51(1)](faq.assets/image51(1).gif)

    串发示意图：![image52](faq.assets/image52.gif)

    数据结构示意图：![image54](faq.assets/image54.gif)

23. 基于Velodyne的旋转机械雷达，转一圈实际上点云的时间戳是周期性的变换，这样当车在运动的过程中，扫到的一面墙很可能就不是平的了，需要结合车的运动信息进行补偿，才能得到真实的点云，OS雷达也是这样么？OS雷达当中的时间戳是发射时间戳，还是接收时间戳？

    - 位置数据当中的时间戳是发射时间戳；
    - VLP同一方位角不同beam之间，因为是串发轮询，也就是第一个线路发射出去之后，才是第二线发射，在这个时间内，车向前走了一段路，以此类推，比如第128线，他们就有127x deltaT的延时，车就向前走了127x deltaT*V的路，所以他们每个beam都有不同的时间戳需要修正，而OS因为是并发所有任意方位角是同步发射，所以无需修正；
    - 但是水平方位角上，由于会有1024或2048次发射，之间有N-1个offset，因水平发射是周期串行发射，所以仍然要计入相关车体运行的修正，对这360°上不同发射延迟的修正。

24. 什么是并联冗余接收，有什么价值？

    我们每个像素下面其实并联了好多个亚像素，所以即使恶劣环境下，由于种种不可抗力部分或n-1像素瞎了，仍然维持工作，不像其他方案瞎了就是瞎了；这个还可以用于一些更复杂的比如后期pixel-specific filter-powered RGB-ID等场景，同时在不影响信噪比的情况下避免过曝风险

25. 什么是子光束指向及密度分布，有什么价值？

    纵向FOV 可以变化，可以比如降低到50% 而维持线数不变，可以中间密两边疏，可以只水平向下，如果特别大的用户，我们还可以给他定制，参照此处：https://drive.weixin.qq.com/s?k=AEYARQeBAAYoGIegvHAE4AvQanABU

16. OS的PPS对齐是绝对相位对齐，还是相对的频率对齐？

    PPS对齐有相位对齐与频率对齐两种，前者是绝对对齐，以上升沿为标记，后者不要求频率或相位都一致，只需要其保持固定的或成比例的差别。对OS而言，是PPS上升沿对齐，绝对相位对齐。

    

17. 有没有方法在不断电的情况下，使雷达处于省电待机状态？

    目前没有类似standby指令，除非初始化状态下可以发一个TCP让暂不击发，但是一旦击发后除非断电无法进入热待机，只能通过降低帧率与增加定时//定角发射间隔实现。

    

39. 脉冲dtof，脉冲itof的区别是什么？

    - itof本质上是测相移：

    ![image-20200526123527033](faq.assets/image-20200526123527033.png)
        
       ![image-20200526123611446](faq.assets/image-20200526123611446.png)
       ![image-20200526123646512](faq.assets/image-20200526123646512.png)
        
       ![image-20200526123702816](faq.assets/image-20200526123702816.png)

    - dtof 本质是直接TDC计算时间

40. 三帧相机的效果是？

    ![1c2dbd4c-3fc7-42e5-96fa-f3c6b50825c9](faq.assets/1c2dbd4c-3fc7-42e5-96fa-f3c6b50825c9-9439917.png)

    ![c6bacfc1-a4af-4673-9d7a-897755ebbe88](faq.assets/c6bacfc1-a4af-4673-9d7a-897755ebbe88-9439917.png)



​		![89264681-a628-4e20-b2bf-ed2fa8837165](faq.assets/89264681-a628-4e20-b2bf-ed2fa8837165-9439917.gif)

​		![0bd69b23-82e5-46e3-8d63-e44c74eaab79](faq.assets/0bd69b23-82e5-46e3-8d63-e44c74eaab79-9439917.gif)

39. 雷达的false negative抑制情况如何？

    ![ANTIGLARE](faq.assets/ANTIGLARE.gif)

40. OS雷达的可靠性如何？

       ![7761c0b5-c6bf-49c0-9a53-a3dd576c4d9c](faq.assets/7761c0b5-c6bf-49c0-9a53-a3dd576c4d9c-9439917.gif)

    ​	![06a0f4b1-3f1e-4892-a406-30b8dfa57da0](faq.assets/06a0f4b1-3f1e-4892-a406-30b8dfa57da0-9439917.gif)

       	![27a67ef2-516a-41c2-83d6-9c23721c3420](faq.assets/27a67ef2-516a-41c2-83d6-9c23721c3420-9439917.gif)

    ​		![a8c6a9ca-fbc9-4871-a185-0c8cc3ea88c2](faq.assets/a8c6a9ca-fbc9-4871-a185-0c8cc3ea88c2-9439917.gif)

41. 屏幕点云闪烁是什么原因？

  <video src="file:///Users/jacky.xu/Ouster-Docs-CN/docs/videos/1589272302572522.mp4" data-src="videos/1589272302572522.mp4" controlslist="nodownload" controls="controls" style="-webkit-user-select: none !important; box-sizing: border-box; max-width: 100%; display: block; margin: 0px auto; transform: translateZ(0px);"></video>

​	这是典型的udp package loss 丢包，请检查 Cable/Hub以及网卡是否是 **真千兆** ，一般更换之后就会消除